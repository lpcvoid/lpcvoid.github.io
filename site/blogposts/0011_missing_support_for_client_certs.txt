TITLE: Frustration with security-focused applications not supporting TLS client certificates
DATE: 2022-07-17
TAGS: selfhost PKI certificates security
-------------------------

Been a few days since my last post, and what better way to scream into the void than by ranting?

I host quite a lot of services for friends and myself as a hobby. These services range from media streaming over wiki instances to smart home stuff. I am very security conscious about this, as anybody should be. One building block of this is that (almost) all services I run are client certificate authenticated, using nginx as a reverse proxy. This stops certain classes of vulnerabilities, such as zero-day exploits, since you can't exploit what you can't reach in the first place.

So, how's the support for client certificates these days?

### Homeassistant

There are multiple reasons why I don't use Homeassistant. One is the absolute tone-deaf stance that they have on client certificates. Case in point:

[Github: Feature request: Support for Client Certificate Authentication](https://github.com/home-assistant/android/issues/442)

From `robbiet480`, who is "Mobile lead":

> Client certificates are currently not supported and we have no plans to implement such a feature as it has been deemed too complex and we are too early in the apps life to get there. Would rather be spending time on implementing features that provide value to all users, like better notifications and more sensors.

This is just absolutely mind-boggling to me. It made me delete my Homeassistant instance. By the way - OpenHab has native support for client certificates in their official app :).

### Vaultwarden

I had a really hard time convincing myself to try network enabled password managers. For the last 12 or so years, I used KeePass, which is completely local. I synced my password database to my phone every few months. It works, but is inconvenient - and much worse, doesn't scale for multiple people in your household. So I decided to try and host Vaultwarden, which is a Rust implementation of the Bitwarden server. The official Bitwarden server requires MSSQL of all things unholy, while Vaultwarden uses the perhaps best software ever written, SQLite.

Anyhow, you'd think such critical infrastructure as a password manager would support client certificate authentication within their official Android app? No :)

https://github.com/bitwarden/mobile/issues/582

At least this thread is full of constructive people, in stark contrast to the responses we got from Homeassistant devs.

#### End of rant

Don't get me wrong here - I am grateful for the countless hours that millions of people pour into their open source projects for often not a dime of compensation. I just feel that we should handle security topics with higher priority, specially when your application domain is so critical.

If anybody is still reading, and in the process of building a mobile application that can potentially be used to connect to selfhostable HTTP backends, please add support for client certificates. The advent of hardware-backed keystores such as the [Google Titan HSM](https://safety.google/intl/en_us/pixel/), paired with new APIs like the [Android Keystore](https://developer.android.com/training/articles/keystore) enables a new level of security within this space that your users will thank you for (the most important IMO being key extraction prevention). Don't take my word for it, there are many threads about this topic for a lot of projects.



